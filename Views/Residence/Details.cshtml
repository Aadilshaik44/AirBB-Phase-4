@model Residence
@{
    ViewData["Title"] = "Residence Details";
    Layout = "_MainLayout";
    var start = (string)(ViewData["st"] ?? "");
    var end = (string)(ViewData["en"] ?? "");
}
<div class="container py-2 details-page">
    <a asp-controller="Home" asp-action="Index" class="btn btn-link px-0">
        ← Back to Home
    </a>

    <div class="row g-4 align-items-start">
        <div class="col-12 col-lg-7">
            <img class="img-fluid rounded-3 hero-img mb-0" src="~/img/@Model.ResidencePicture" alt="@Model.Name" />
        </div>
        <div class="col-12 col-lg-5">
            <h3 class="mb-1">@Model.Name</h3>
            <div class="text-muted">@Model.Location?.Name</div>
            <div class="mt-3">
                <div>@Model.GuestNumber guests</div>
                <div>@Model.BedroomNumber bedrooms • @Model.BathroomNumber bathrooms</div>
                <div class="fw-semibold mt-2">$@Model.PricePerNight/night</div>
            </div>

            <form asp-controller="Reservations" asp-action="Reserve" method="post" class="vstack gap-3 mt-4">
                <input type="hidden" name="id" value="@Model.ResidenceId" />
                <div>
                    <label class="form-label">Select dates</label>
                    <input id="detailRange" class="form-control js-daterange"
                        placeholder="MM/DD/YYYY - MM/DD/YYYY"
                        data-start-field="start" data-end-field="end" />
                    <input type="hidden" name="start" value="@start" />
                    <input type="hidden" name="end"   value="@end" />
                </div>
                <div class="d-flex gap-2">
                    <a asp-controller="Residence" asp-action="Index" class="btn btn-outline-secondary">Back to Home</a>
                    <button type="submit" class="btn btn-primary">Reserve</button>
                </div>
            </form>

        </div>
    </div>
</div>

@section Scripts{
<script>
    window.initDatePicker && window.initDatePicker({
        inputId: 'detailRange',
        startFieldName: 'start',
        endFieldName: 'end',
        startVal: '@start', endVal: '@end'
    });
</script>
}
