@{
    Layout = "_Layout";
}

<header class="sticky-top">
  <nav class="navbar navbar-expand-md navbar-dark nav-brandbar" aria-label="Main">
    <div class="container-fluid px-0">
      <a class="navbar-brand fw-semibold" asp-controller="Home" asp-action="Index">AirBB</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
              aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div id="mainNav" class="collapse navbar-collapse">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" asp-controller="Residence"  asp-action="Index">Homes</a></li>
          <li class="nav-item"><a class="nav-link" asp-controller="Experience" asp-action="List" asp-route-id="All">Experiences</a></li>
          <li class="nav-item"><a class="nav-link" asp-controller="Service"    asp-action="List" asp-route-id="All">Services</a></li>
        </ul>

        <ul class="navbar-nav ms-auto">
          <!-- Reservations link + badge (session-based) -->
          @{
              var _sess = new AirBB.Models.Utilities.AirBBSession(Context.Session);
              var _cnt  = _sess.GetReservationCount() ?? 0;
          }
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center gap-1" asp-controller="Reservations" asp-action="Index" title="My reservations">
              <i class="fa-solid fa-suitcase-rolling"></i>
              <span class="badge text-bg-light">@_cnt</span>
            </a>
          </li>

          <li class="nav-item"><a class="nav-link" asp-area="Admin" asp-controller="Home" asp-action="Index">Admin</a></li>
        </ul>
      </div>
    </div>
  </nav>
</header>

@if (TempData.ContainsKey("message"))
{
  <div class="alert alert-success text-center rounded-0 mb-0">
    @TempData["message"]
  </div>
}

<main class="flex-grow-1">
  @RenderBody()
</main>

<footer class="footer-bar">
  <div class="container-fluid px-0 py-2">
    <ul class="list-inline mb-0 px-2">
      <li class="list-inline-item"><a asp-controller="Home" asp-action="Support">Support</a></li>
      <li class="list-inline-item">•</li>
      <li class="list-inline-item"><a asp-controller="Home" asp-action="CancellationPolicy">Cancellation Policy</a></li>
      <li class="list-inline-item">•</li>
      <li class="list-inline-item"><a asp-controller="Home" asp-action="Terms">Terms &amp; Condition</a></li>
      <li class="list-inline-item">•</li>
      <li class="list-inline-item"><a asp-controller="Home" asp-action="Cookies">Cookie Policies</a></li>
    </ul>
  </div>
</footer>

@RenderSection("Scripts", required: false)
